<%- include("partials/header.ejs") %>

<h1>Contact Me</h1>
<form action="/contact" method="POST" id="contactForm">
  <input name="name" type="text" class="feedback-input" placeholder="Name" required />
  <input name="email" type="email" class="feedback-input" placeholder="Email" required />
  <textarea name="message" class="feedback-input" placeholder="Comment" required></textarea>
  <button type="submit" class="submit-btn" id="submitBtn">
    <span class="btn-text">SUBMIT</span>
    <span class="loader" style="display: none;"></span>
  </button>
</form>

<% if (typeof success !== 'undefined' && success) { %>
  <div class="alert alert-success">Message sent successfully!</div>
<% } %>
<% if (typeof error !== 'undefined' && error) { %>
  <div class="alert alert-danger">There was an error sending your message. Please try again.</div>
<% } %>

<%- include("partials/footer.ejs") %>

<script>
  const form = document.getElementById('contactForm');
  const submitBtn = document.getElementById('submitBtn');
  const btnText = submitBtn.querySelector('.btn-text');
  const loader = submitBtn.querySelector('.loader');

  form.addEventListener('submit', function(e) {
    submitBtn.disabled = true;
    btnText.style.display = 'none';
    loader.style.display = 'inline-block';
  });
</script>

<script src="/js/contact.js"></script>